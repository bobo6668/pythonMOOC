# （笔记）第7周 文件和数据格式化

## 7.1 文件的使用

![](https://raw.githubusercontent.com/bobo6668/markdown-pictures-bobo/master/img/pythonMOOC/20200904102233.png)
![](https://raw.githubusercontent.com/bobo6668/markdown-pictures-bobo/master/img/pythonMOOC/20200904102241.png)

## 7.2 实例11: 自动轨迹绘制

![](https://raw.githubusercontent.com/bobo6668/markdown-pictures-bobo/master/img/pythonMOOC/20200904230459.png)

```python
#AutoTraceDraw.py 参考代码
import turtle as t

#初始化
t.title('自动轨迹绘制')
t.setup(800, 600, 0, 0)
t.pencolor("red")
t.pensize(5)

#数据读取
datals = []
f = open("data.txt")
for line in f:
    line = line.replace("\n","")
    datals.append(list(map(eval, line.split(","))))
                  #先每个元素都执行eval，然后再把得到map转化成list
f.close()

#自动绘制
for i in range(len(datals)):
    t.pencolor(datals[i][3],datals[i][4],datals[i][5]) # 颜色
    t.fd(datals[i][0])      # 前进距离
    if datals[i][1]:        # 转向
        t.rt(datals[i][2])  # 角度
    else:
        t.lt(datals[i][2])
```
![](https://raw.githubusercontent.com/bobo6668/markdown-pictures-bobo/master/img/pythonMOOC/20200904230453.png)

## 7.3 一维数据的格式化和处理

![](https://raw.githubusercontent.com/bobo6668/markdown-pictures-bobo/master/img/pythonMOOC/20200904230450.png)
![](https://raw.githubusercontent.com/bobo6668/markdown-pictures-bobo/master/img/pythonMOOC/20200904230514.png)

## 7.4 二维数据的格式化和处理

![](https://raw.githubusercontent.com/bobo6668/markdown-pictures-bobo/master/img/pythonMOOC/20200904230417.png)

## 7.5 模块6: wordcloud库的使用

![image-20200905193716472](C:%5CUsers%5CXKJ-PC%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200905193716472.png)

### 原理示意图![image-20200905193444278](https://raw.githubusercontent.com/bobo6668/markdown-pictures-bobo/master/img/pythonMOOC/20200905193444.png)

### 英文 hamlet.txt

```python
# wordCloudHalmet.py

import wordcloud

# 读取txt
txt = open("E:\\21_git\\pythonMOOC\\week6\\hamlet.txt", "rt").read()
# 归一化处理【√】
txt = txt.lower()                               # 全部转化为小写
for ch in '!"#$%&()*+,-./:;<=>?@[\\]^_‘{|}~':   # 替换掉所有特殊字符
    txt = txt.replace(ch, " ")
# 至此，已转化为以空格分隔的字符串

# 生成词云
wc = wordcloud.WordCloud(width = 1920, height = 1080)
wc.generate(txt)
wc.to_file('wordCloudHamlet.png')
```

![wordCloudHamlet](https://raw.githubusercontent.com/bobo6668/markdown-pictures-bobo/master/img/pythonMOOC/20200905195611.png)

### 中文 三国演义

```python
# wordCloudthreeKingdoms.py

import wordcloud
import jieba

# 读取txt
threeKingdomsTxt = open("E:\\21_git\\pythonMOOC\\week6\\threekingdoms.txt", "rt", \
    encoding = 'utf-8').read()
# 利用jieba库 分词 【√】
words = jieba.lcut(threeKingdomsTxt)
for word in words:
    if len(word) == 1:
        del word
# 转化为以空格分隔的字符串
txt = " ".join(words)

# 生成词云
wc = wordcloud.WordCloud(width = 1920, height = 1080, font_path="msyh.ttc") # 注意需要加载中文字体
wc.generate(txt)
wc.to_file('wordCloudthreeKingdoms.png')
```

![wordCloudthreeKingdoms](https://raw.githubusercontent.com/bobo6668/markdown-pictures-bobo/master/img/pythonMOOC/20200905195622.png)

## 7.6 实例12: 政府工作报告词云

![image-20200905201958568](C:%5CUsers%5CXKJ-PC%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20200905201958568.png)

```python
# wordCloudthreeKingdoms.py

import wordcloud
import jieba
from imageio import imread #【√】
mask = imread("star2.png")  #【√】

# 读取txt
threeKingdomsTxt = open("新时代中国特色社会主义.txt", \
                            "rt", encoding = 'utf-8').read()
# 利用jieba库 分词 【√】
words = jieba.lcut(threeKingdomsTxt)
# for word in words:
#     if len(word) == 1:
#         del word
# 转化为以空格分隔的字符串
txt = " ".join(words)

# 生成词云                # 注意图片大小实际取决于mask   # 注意需要加载中文字体
wc = wordcloud.WordCloud(width = 1920, height = 1080, font_path="msyh.ttc", \
                            background_color = 'white', mask = mask) #【√】
wc.generate(txt)
wc.to_file('wordCloud新时代中国特色社会主义.png')
```

![wordCloud新时代中国特色社会主义](https://raw.githubusercontent.com/bobo6668/markdown-pictures-bobo/master/img/pythonMOOC/20200905201849.png)

**吐血心得**：

原来mask所需要的图片，并不是透明的png……只是不填充白色区域……

所以下载了透明的png之后，需要转一下jpg。如 [https://png2jpg.com/zh/](https://png2jpg.com/zh/)

